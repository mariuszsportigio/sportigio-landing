---
// TrustedClubsSection.astro
// Scrolling marquee of trusted club logos
import {
  defaultLanguage,
  getTranslations,
  type Language,
} from "../i18n";

interface Props {
  lang?: Language;
  tagline?: string;
}

const { lang = defaultLanguage, tagline: taglineProp } = Astro.props as Props;

const translations = getTranslations(lang) as any;
const fallbackTranslations =
  lang === defaultLanguage ? translations : (getTranslations(defaultLanguage) as any);
const defaultTagline =
  lang === defaultLanguage
    ? "Zaufało nam ponad 100 klubów"
    : fallbackTranslations?.landing?.trusted?.tagline ?? "Trusted by 100+ clubs";
const tagline =
  taglineProp ?? translations?.landing?.trusted?.tagline ?? defaultTagline;

const logos = [
  { src: "/teams/legia.avif", alt: "Legia" },
  { src: "/teams/wisla.avif", alt: "Wisła" },
  { src: "/teams/trefl.avif", alt: "Trefl" },
  { src: "/teams/widzew.avif", alt: "Widzew" },
  { src: "/teams/king-wilki.avif", alt: "King Wilki" },
  { src: "/teams/projekt-warszawa.avif", alt: "Projekt Warszawa" },
  { src: "/teams/radomka.avif", alt: "Radomka" },
  { src: "/teams/twarde.avif", alt: "Twarde" },
  { src: "/teams/fc-torun.avif", alt: "FC Toruń" },
  { src: "/teams/notec.avif", alt: "Noteć" },
];
---

<section class="py-12 bg-white">
  <div class="max-w-7xl mx-auto px-6 lg:px-8">
    <div class="text-center mb-8">
      <p class="text-sm md:text-base text-gray-600">
        {tagline}
      </p>
    </div>

    <div class="relative overflow-hidden">
      <div
        class="pointer-events-none edge-fade edge-fade-left"
        aria-hidden="true"
      >
      </div>
      <div
        class="pointer-events-none edge-fade edge-fade-right"
        aria-hidden="true"
      >
      </div>

      <div class="flex items-center gap-10 marquee-track" aria-hidden="false">
        {
          logos.map((logo) => (
            <div class="shrink-0">
              <img
                src={logo.src}
                alt={logo.alt}
                class="h-10 w-auto object-contain"
                loading="lazy"
                decoding="async"
              />
            </div>
          ))
        }
        {
          logos.map((logo) => (
            <div class="shrink-0" aria-hidden="true">
              <img
                src={logo.src}
                alt={logo.alt}
                class="h-10 w-auto object-contain"
                loading="lazy"
                decoding="async"
              />
            </div>
          ))
        }
      </div>
    </div>
  </div>

  <style>
    .marquee-track {
      width: max-content;
      animation: marquee-scroll 28s linear infinite;
    }

    @keyframes marquee-scroll {
      0% {
        transform: translateX(0);
      }
      100% {
        transform: translateX(-50%);
      }
    }

    @media (prefers-reduced-motion: reduce) {
      .marquee-track {
        animation: none;
      }
    }

    .edge-fade {
      position: absolute;
      top: 0;
      bottom: 0;
      width: 80px;
      z-index: 10;
    }

    .edge-fade-left {
      left: 0;
      background: linear-gradient(
        to right,
        rgba(255, 255, 255, 1),
        rgba(255, 255, 255, 0)
      );
    }

    .edge-fade-right {
      right: 0;
      background: linear-gradient(
        to left,
        rgba(255, 255, 255, 1),
        rgba(255, 255, 255, 0)
      );
    }
  </style>
</section>
