---
interface Props {
  title: string;
  description: string;
  iconPath?: string; // optional SVG path d="..."
  iconName?: string; // Material Symbols Rounded icon name
  iconImageSrc?: string; // optional image used inside icon container
  imageSrc?: string; // optional image path
  ctaVariant?: "none" | "link" | "button";
  ctaText?: string;
  ctaHref?: string;
  alignment?: "center" | "left";
  size?: "sm" | "md";
  ctaAlignment?: "left" | "center";
}

const props = Astro.props as Props;
const {
  title,
  description,
  iconPath,
  iconName,
  iconImageSrc,
  imageSrc,
  ctaVariant = "none",
  ctaText = "Learn more",
  ctaHref = "#",
  alignment = "center",
  size = "md",
  ctaAlignment = alignment,
} = props;
---

<div
  class={`w-full rounded-2xl bg-white shadow-sm border border-gray-100 ${size === "sm" ? "p-6" : "p-8"} ${alignment === "center" ? "items-center text-center" : "text-left"} flex flex-col h-full`}
>
  {
    (iconName || iconPath || iconImageSrc) && (
      <div
        class={`${size === "sm" ? "w-10 h-10" : "w-14 h-14"} rounded-xl ${alignment === "center" ? "mx-auto" : "mx-0"} icon-gradient-primary-strong flex items-center justify-center text-white shadow-md mb-5`}
      >
        {iconName ? (
          <span
            class={`material-symbols-rounded ${size === "sm" ? "text-[22px]" : "text-[28px]"} leading-none`}
          >
            {iconName}
          </span>
        ) : iconPath ? (
          <svg
            class={`${size === "sm" ? "w-6 h-6" : "w-7 h-7"}`}
            fill="none"
            stroke="currentColor"
            viewBox="0 0 24 24"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d={iconPath}
            />
          </svg>
        ) : (
          <img
            src={iconImageSrc!}
            alt=""
            class={`${size === "sm" ? "w-6 h-6" : "w-7 h-7"} brightness-0 invert`}
          />
        )}
      </div>
    )
  }

  {
    !iconName && !iconPath && !iconImageSrc && imageSrc && (
      <img
        src={imageSrc}
        alt={title}
        class={`w-full rounded-xl shadow mb-6 ${alignment === "center" ? "mx-auto" : ""}`}
      />
    )
  }

  <div
    class={`${size === "sm" ? "min-h-[3.75rem]" : "min-h-[4.5rem]"} w-full flex ${alignment === "center" ? "items-center justify-center text-center" : "items-center"} mb-3`}
  >
    <h3
      class={`font-poppins font-semibold ${size === "sm" ? "text-xl" : "text-2xl"} text-gray-900 leading-snug`}
    >
      {title}
    </h3>
  </div>
  <p
    class={`text-gray-600 leading-relaxed ${size === "sm" ? "text-sm" : ""} ${alignment === "center" ? "mx-auto text-center" : ""} flex-1 w-full`}
  >
    {description}
  </p>

  {
    ctaVariant !== "none" && (
      <div
        class={`${size === "sm" ? "mt-4" : "mt-6"} ${ctaAlignment === "center" ? "flex justify-center" : ""}`}
      >
        {ctaVariant === "link" && (
          <a
            href={ctaHref}
            class="text-[#0B2360] font-medium inline-flex items-center gap-2 group"
          >
            <span>{ctaText}</span>
            <svg
              class="w-4 h-4 transition-transform group-hover:translate-x-0.5"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"
              />
            </svg>
          </a>
        )}

        {ctaVariant === "button" && (
          <a
            href={ctaHref}
            class="btn-style-1 px-5 py-2.5 rounded-lg text-sm font-semibold inline-flex items-center gap-2"
          >
            <span>{ctaText}</span>
            <svg
              class="w-4 h-4"
              fill="none"
              stroke="currentColor"
              viewBox="0 0 24 24"
            >
              <path
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="2"
                d="M9 5l7 7-7 7"
              />
            </svg>
          </a>
        )}
      </div>
    )
  }
</div>
